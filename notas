SELECT `Proyecto_id`, `Comunidad_id`, `Fases_idFases`, round(avg(`calif`),2) FROM `evaluacion` group by `Proyecto_id`,`Fases_idFases` 

SELECT `idCalf`, `Comunidad_id`, `Proyecto_id`, `Fases_idFases`, `Rubricas_idPreguntas`, `calif` FROM `evaluacion` WHERE `Proyecto_id`='1' 


create view  comunidadlider as select 
`team`.`comunidad_id` AS `comunidad_id`,
`team`.`status` AS `status`,
`detprodesglozado`.`nombreLider` AS `nombreLider`,
`detprodesglozado`.`EmailLider` AS `EmailLider`,
`detprodesglozado`.`CelularLider` AS `CelularLider`,
`detprodesglozado`.`CarreraLider` AS `CarreraLider`,
`detprodesglozado`.`InstLider` AS `InstLider`,
`detprodesglozado`.`NombreDeEquipo` AS `NombreDeEquipo`,
`detprodesglozado`.`NombreProyecto` AS `NombreProyecto`,
`detprodesglozado`.`DesProyecto` AS `DesProyecto`,
`detprodesglozado`.`Vertical` AS `Vertical`,
`detprodesglozado`.`VerticalDesc` AS `VerticalDesc`,
`detprodesglozado`.`InfAsesoria` AS `InfAsesoria`,
`detprodesglozado`.`Edicion` AS `Hack`,
`detprodesglozado`.`status` AS `statusHack`,
`detprodesglozado`.`id` AS `IdProyecto`, 
from (`team` join `detprodesglozado` on((`team`.`Proyecto_id` = `detprodesglozado`.`ProyectoId`))) 




 create view detprodesglozado as select `proyecto`.`id` AS `ProyectoId`, concat(`comunidad`.`Nombre`, ' ', `comunidad`.`Apellidos`) AS `nombreLider`,
 `comunidad`.`E-mail` AS `EmailLider`,
 `comunidad`.`Celular` AS `CelularLider`,
 `carrera`.`Carrera` AS `CarreraLider`,
 `institucion`.`Institucion` AS `InstLider`,
 `proyecto`.`NombreDeEquipo` AS `NombreDeEquipo`,
 `proyecto`.`id` AS `id`,
 `proyecto`.`NombreProyecto` AS `NombreProyecto`,
 `proyecto`.`Descripcion` AS `DesProyecto`,
 `vertical`.`Nombre` AS `Vertical`,
 `vertical`.`Descripcion` AS `VerticalDesc`,
 `vertical`.`InfAsesoria` AS `InfAsesoria`,
 `hackatonedicion`.`Edicion` AS `Edicion`,
 `hackatonedicion`.`status` AS `status` 
  from (((((`proyecto` join `comunidad` on((`comunidad`.`id` = `proyecto`.`comunidad_id`))) join `carrera` on((`carrera`.`id` = `comunidad`.`Carrera_id`))) join `institucion` on((`institucion`.`id` = `comunidad`.`Institucion_id`))) join `vertical` on((`vertical`.`id` = `proyecto`.`Vertical_id`))) join `hackatonedicion` on((`vertical`.`HackatonEdicion_id` = `hackatonedicion`.`id`))) where (`hackatonedicion`.`status` = '1');



infdetalladaproyecto select `evaluacion`.`idCalf` AS `idCalf`,
`evaluacion`.`Proyecto_id` AS `idproyecto`,
`vertical`.`id` AS `idvertical`,
`hackatonedicion`.`id` AS `idHack`, 
`evaluacion`.`Rubricas_idPreguntas` AS `pregunta`,
`evaluacion`.`Comunidad_id` AS `juez`,
`evaluacion`.`Fases_idFases` AS `fase`,
`evaluacion`.`calif` AS `Calif` from `evaluacion`
 inner join `proyecto` on `evaluacion`.`Proyecto_id` = `proyecto`.`id`
 inner join `vertical` on `proyecto`.`Vertical_id` = `vertical`.`id`
 inner join `hackatonedicion` on `vertical`.`HackatonEdicion_id` = `hackatonedicion`.`id`
  order by `hackatonedicion`.`id`,
`vertical`.`id`,`evaluacion`.`Proyecto_id`,`evaluacion`.`Comunidad_id`,'fase',`evaluacion`.`Rubricas_idPreguntas`;



create view calificacion_x_Juez as select `Proyecto_id` AS `idproyecto`, `idvertical` AS `idvertical`, `idHack` AS `idHack`, `Comunidad_id` AS `juez`, `Fases_idFases` AS `fase`, round(avg(`calif`),4) AS `calfi` from `evaluacion` group by `idproyecto`,`fase`,`juez` 


create view calificacion_final_proyecto as select `idproyecto` AS `idproyecto`, `idvertical` AS `idvertical`, `idHack` AS `idHack`, `fase` AS `fase`, round(avg(`calfi`),4) AS `calf` from `calificacion_x_juez` group by `idHack`, `idvertical`, `fase`, `idproyecto` order by `idHack`, `idvertical`, `fase`, round(avg(`calfi`),4) desc 

select 
`idCalf` AS `idcalf`,
`idproyecto` AS `idproyecto`,
`idvertical` AS `idvertical`,
`idHack` AS `idHack`,
`equipoLimite` AS `equipoLimite`,
`juez` AS `juez`,
`fase` AS `fase`,
round(avg(`Calif`),4) AS `calfi` 
from `infdetalladaproyecto` group by `idproyecto`,`fase`,`juez`


SELECT `calificacion_final_proyecto`.`idproyecto`, `calificacion_final_proyecto`.`idvertical`, `calificacion_final_proyecto`.`idHack`, `calificacion_final_proyecto`.`fase`, `calificacion_final_proyecto`.`calf` FROM `calificacion_final_proyecto` inner join `hackatonedicion` on `hackatonedicion`.`id`=`calificacion_final_proyecto`.`idHack` WHERE `hackatonedicion`.`status`='1' and `idvertical`='22' and `fase`= '1' ORDER BY `calf` desc limit 4 